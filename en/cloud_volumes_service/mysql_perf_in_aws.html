
<!DOCTYPE html>
<!--[if IE 9]>         <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!--> <html>         <!--<![endif]-->
  <head>
  <title>MySQL in the Clouds | NetApp Cloud Docs</title>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation">
  <meta http-equiv="nss-subtype" content="User Guide">

  

  <meta name="description" content="A review of MySQL performance as it pertains to the NetApp Cloud Volumes Service in AWS.">
  <meta name="keywords" content=" cloud volumes service, durability, availability, snapshots, mysql, performance, nfs, AWS">

  <!-- Icons -->
  <link rel="icon" href="/hybridcloudsolutions/en/images/favicon.ico" type="image/x-icon">

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- LUCI CSS Content -->
  <link rel="stylesheet" href="//luci.netapp.com/archives/3_3_2/bower_components/eightshapes-blocks/dist/esb.min.css">
  <link rel="stylesheet" href="//luci.netapp.com/archives/3_3_2/netapp-library/css/netapp-library.min.css">
  <link rel="stylesheet" href="//luci.netapp.com/archives/3_3_2/css/doc.css">
  <link rel="stylesheet" href="//luci.netapp.com/archives/3_3_2/css/doc-components.css">

  <link rel="stylesheet" href='/hybridcloudsolutions/en/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/hybridcloudsolutions/en/css/na-search.css' type='text/css'>
  <link rel='stylesheet' href='/hybridcloudsolutions/en/css/clouddocs.css' type='text/css'>

  <!-- Font awesome seems to affect our GitHub Icon and generic "arrow box" for external links. -->
  <link rel="stylesheet" type="text/css" href="/hybridcloudsolutions/en/css/font-awesome.min.css">
  <!-- <link rel="stylesheet" href="/hybridcloudsolutions/en/css/customstyles.css"> -->
  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/hybridcloudsolutions/en/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel='stylesheet' href='/hybridcloudsolutions/en/css/netapp.css' type='text/css'>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/hybridcloudsolutions/en/js/na-search.js'></script>
  

  <script src='/hybridcloudsolutions/en/js/clouddocs.js'></script>
  <script src='/hybridcloudsolutions/en/js/s_code_impl.js'></script>
  <script src="/hybridcloudsolutions/en/js/jquery.navgoco.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
  <script src="/hybridcloudsolutions/en/js/toc.js"></script>
  <script src="/hybridcloudsolutions/en/js/customscripts.js"></script>

  <script>
      $(document).ready(function() {
          // Initialize navgoco with default options
          $("#mysidebar").navgoco({
              caretHtml: '',
              accordion: true,
              openClass: 'active', // open
              save: false, // leave false or nav highlighting doesn't work right
              cookie: {
                  name: 'navgoco',
                  expires: false,
                  path: '/'
              },
              slide: {
                  duration: 400,
                  easing: 'swing'
              }
          });

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(function () {
          $('[data-toggle="tooltip"]').tooltip()
      })
  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>

  <!-- Controls the i18n Browser Redirection -->
  <script>
    var siteLocales = [];
    
      siteLocales.push("zz");
    
      siteLocales.push("en");
    
      siteLocales.push("us-en");
    

    standardizeUrl(siteLocales, "clouddocs.netapp.com", "https://docs.netapp.com");
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class="n-doc__component-detail">
    <a href="#n-main-content" class="visually-hidden">Skip to main content</a>
<div class="n-off-canvas-menu">
  <div class="n-off-canvas-menu__menu">
    <div class="n-off-canvas-menu__menu-inner">
      <div class="n-off-canvas-menu__property-title">NetApp Cloud Docs</div>
      <ul class="n-off-canvas-menu__property-navigation-list">
        <li class="n-off-canvas-menu__property-navigation-list-item ">
          <a href="https://docs.netapp.com/en/" class="n-off-canvas-menu__property-navigation-link">
            Home
          </a>
          <div class="n-off-canvas-menu__child-menu">
            <ul class="n-menu__list">

            </ul>
          </div>
        </li>
      </ul>

      <ul class="n-off-canvas-menu__global-navigation-list">
         <li class="n-off-canvas-menu__global-navigation-list-header">More From NetApp</li>
         <li class="n-off-canvas-menu__global-navigation-list-item"><a href="#" class="n-off-canvas-menu__global-navigation-link">Netapp.com</a></li>
      </ul>
    </div>
  </div>
</div>

    <div class="n-off-canvas-menu__content-wrap">
      <!-- Header -->
      <header>
  <!-- Top Hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
            <li class="n-top-hat__list-item">
              <a href="http://www.netapp.com" class="n-top-hat__link">NetApp.com</a>
            </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Property Bar -->
  <div class="n-property-bar n-property-bar--v3">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link"><span class="n-property-bar__menu-toggle-text">Menu</span><svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
          <title>bars</title>
          <use xlink:href="/hybridcloudsolutions/en/common/svg/sprite.svg#bars"></use>
        </svg></a>
      </div>
      <div class="n-property-bar__property-mark n-property-bar__property-mark--has-property-name">
        <a class="n-property-bar__property-link" href="https://docs.netapp.com/en/">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/hybridcloudsolutions/en/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg viewBox="0 0 1008 181.537" class="n-property-bar__logo-svg" aria-labelledby="title">
              <title>NetApp</title>
              <use xlink:href="/hybridcloudsolutions/en/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
          <h2 class="n-property-bar__property-name">Cloud Docs</h2>
        </a>
      </div>

      <!-- NetApp Search Bar -->
      
      <div id="search-demo-container" class="n-property-bar__search">
        <div id="react-search"></div>
      </div>
      

      <div id="ie-i18n-menu" class="n-property-bar__utils">
        <ul class="n-property-navigation-bar__utils-list">
          <li class="n-property-navigation-bar__utils-list-item">
            <a href="#" class="n-property-navigation-bar__utils-link n-property-navigation-bar__nav-link n-property-navigation-bar__language-selector-toggle" data-menu-id="n-property-navigation-bar__menu--language-selector">
              <svg class="n-icon-globe n-globe__icon" aria-labelledby="title">
                <title>globe</title>
                <use xlink:href="/hybridcloudsolutions/en/common/svg/sprite.svg#globe"></use>
              </svg>
            </a>
          </li>
        </ul>
      </div>
      <!-- End NetApp Search Bar -->
    </div>

    <div class="n-property-bar__menus">
      <div id="n-property-navigation-bar__menu--language-selector" class="n-menu n-menu--v3">
        <div class="n-language-selector-menu">
          <div class="n-language-selector-menu__header">
            <span class="n-language-selector-menu__title">Select Your Language</span>
          </div>
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list">
                <li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="/hybridcloudsolutions/us-en/" class="n-menu__header-text">English</a>
                </li>
                
              </ul>
            </li>
          </ul>
          <div class="menu__footer">
            <p>Current Language: en
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


      <!-- Content -->
      <main role="main" id="n-main-content" class="n-main-content">
        <div class="n-container">
          <div class="n-row">
            <div class="n-doc n-doc__component-list">
              <!-- Sidebar Column -->
              
              <div class="col-md-3" >
                  

<ul id="mysidebar" class="nav">
  

  
    <li><a href="../index.html">Hybrid Cloud Solutions</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Technology</a>
      <ul>
        

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Cloud Volumes Service</a>
      <ul>
        

  
    <li><a href="snapshot_cloud_volumes.html">Durability, Availability, Encryption and Snapshots</a></li>
  

  
    <li><a href="oracle_perf_in_aws.html">Oracle in the Clouds</a></li>
  

  
    <li class="active"><a href="mysql_perf_in_aws.html">MySQL Performance and the NetApp Cloud Volumes Service for AWS</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Cloud Volumes ONTAP</a>
      <ul>
        

  
    <li><a href="../cloud_volumes_ontap/networking_cloud_volumes_ontap.html">NetApp Cloud Volumes ONTAP And Enhanced Networking Support</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">NetApp Private Storage</a>
      <ul>
        

  
    <li><a href="../NPS/gdpr_and_hybrid_cloud.html">GDPR and Hybrid Cloud A More Perfect Union</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Industries</a>
      <ul>
        

  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">HealthCare</a>
      <ul>
        

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Genomics</a>
      <ul>
        

  
    <li><a href="../genomics/NetApp_PetaGene_Whitepaper.html">NetApp PetaGene Whitepaper</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Business Applications</a>
      <ul>
        

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Oracle</a>
      <ul>
        

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Blogs</a>
      <ul>
        

  
    <li><a href="oracle_perf_in_aws.html">Oracle Performance and the NetApp Cloud Volumes Service for AWS</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Technical Reports</a>
      <ul>
        

  
    <li><a href="https://www.netapp.com/us/media/tr-4676.pdf" target="_blank">TR-4876 Oracle and NetApp Cloud Volumes ONTAP for AWS</a></li>
  

  
    <li><a href="https://www.netapp.com/us/media/tr-4691.pdf" target="_blank">TR-4691 Oracle and NetApp Cloud Volumes ONTAP for Azure</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">MySQL</a>
      <ul>
        

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Blogs</a>
      <ul>
        

  
    <li class="active"><a href="mysql_perf_in_aws.html">MySQL Performance and the NetApp Cloud Volumes Service for AWS</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  


</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

              </div>
              

              <div class="n-doc__component-detail-content n-doc__component-detail-content--show-code">
                <!-- Begin of page container -->
                <article class="page-content">
                  

<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">MySQL in the Clouds
    <span>
      
        <a target="_blank" href="https://github.com/NetAppDocs/hybridcloudsolutions/blob/master/cloud_volumes_service/mysql_perf_in_aws.adoc" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a>
      
    </span>
  </h1>
</div>

<h2 id="netapp-cloud-volumes-service-for-aws" class="discrete">NetApp Cloud Volumes Service For AWS</h2>
<div class="paragraph">
<p>A review of MySQL performance as it pertains to the NetApp Cloud Volumes Service in AWS.</p>
</div>
<h5 id="authors-ali-aiello-chad-morgenstern-ron-pratt" class="discrete">Authors: Ali Aiello, Chad Morgenstern, Ron Pratt</h5>
<div class="paragraph">
<p>Are looking for consistently good performance for your MySQL database - I mean, really, who is going to answer no to that question?  With or without snapshots, whether you are accessing the primary database or a snapshotted copy, you can expect excellent, consistent performance from the NetApp Cloud Volumes Service.  Performance is of course not the whole story. Databases need durability, data is a crown jewel of any enterprise.  Consumers demand the protection against theft provided by encryption, we&#8217;ve got that too, its managed by the service.  Add to these the advantage of accessing database volumes from any availability zone within the region – without the need to replicate to make this possible – and you&#8217;ll find that the NetApp Cloud Volumes Service is the ideal solution for your MySQL needs.</p>
</div>
<div class="paragraph">
<p>Please see the blog <a href="snapshot_cloud_volumes.html">NetApp Cloud Volumes, Not Your Mothers File Service</a> for details regarding how NetApp Cloud Volumes approaches durability, encryption, and availability as well as some really nice details regarding the Cloud Volumes snapshot technology.</p>
</div>
<div class="paragraph">
<p>The remainder of this blog focuses on MySQL performance.</p>
</div>
<h4 id="performance" class="discrete">Performance</h4>
<div class="paragraph">
<p>When performing evaluations of database workloads, always keep in mind the impact of server memory.  Ideally queries find their data resident therein as latency from memory is always going to be orders of magnitude lower than any “disk” query.  What does this mean for you?  While storage latency matters, memory hit percentage matters more.  When database administrators say that they need a latency of X, keep in mind what they are talking about.</p>
</div>
<div class="paragraph">
<p>With that said…</p>
</div>
<h5 id="the-workload-generator" class="discrete">The Workload Generator</h5>
<div class="paragraph">
<p>To test MySQL with cloud volumes, NetApp used the TPC Benchmark C workload generator.  TPCC is an industry standard online transaction processing (OLTP) benchmark that leverages actual MySQL databases and their I/O paths. Workload generators that leverage real applications are always preferred over more synthetic generators such as Vdbench, Iozone, and heaven forbid dd, tar, cpio, or cp.  TPCC standardized on an 80/20 read:write workload, the test results in this section are based there on.</p>
</div>
<h5 id="the-scenarios" class="discrete">The Scenarios</h5>
<div class="paragraph">
<p>Two scenarios were tested in this environment, the first evaluated the capabilities of a single instance to drive MySQL I/O, while the second set out to determine the edges of a single cloud volume.   The results of both scenarios are shown in the graphic below. The gray line represents the single-instance and blue the multi-instance environment.  Please note that the latency reported in the graphics below represent storage latency as reported the by the database.</p>
</div>
<h5 id="the-results" class="discrete">The Results</h5>
<div class="paragraph">
<p>Run against the single instance, TPCC generated approximately 4.5Gbps worth of I/O which approaches the Amazon Web Service inter-VPC limit imposed per network connection.   Run against multiple instances, TPCC generated just about 16Gbps of throughput against a single Cloud Volume - which is pretty darned cool.</p>
</div>
<h6 id="figure-1-mysql-tpcc-test-graphic" class="discrete">Figure 1: MySQL TPCC Test Graphic</h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./media/mysql_tpcc_perf_test_aws.png" alt="mysql tpcc perf test aws" width="800px">
</div>
</div>
<h4 id="best-practices" class="discrete">Best Practices</h4>
<div class="paragraph">
<p>The following parameters were placed in the MySQL /etc/my.cnf configuration file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>[MySQLd]</p>
<div class="ulist">
<ul>
<li>
<p>innodb_buffer_pool_size=23622320128</p>
</li>
<li>
<p>innodb_log_buffer_size=4294967295</p>
</li>
<li>
<p>innodb_log_file_size=1073741824</p>
</li>
<li>
<p>innodb_flush_log_at_trx_commit=2</p>
</li>
<li>
<p>innodb_open_files=4096</p>
</li>
<li>
<p>innodb_page_size=4096</p>
</li>
<li>
<p>innodb_read_io_threads=64</p>
</li>
<li>
<p>innodb_write_io_threads=64</p>
</li>
<li>
<p>performance_schema</p>
</li>
<li>
<p>innodb_doublewrite=0;</p>
</li>
<li>
<p>max_connections=1000</p>
</li>
<li>
<p>innodb_thread_concurrency=128</p>
</li>
<li>
<p>innodb_max_dirty_pages_pct=0</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<h2 id="about-netapp" class="discrete">About NetApp</h2>
<div class="paragraph">
<p>NetApp is the data authority for hybrid cloud. We provide a full range of hybrid cloud data services that simplify management of data across cloud and on-premises environments to accelerate digital transformation. NetApp empowers global organizations to unleash the full potential of their data to expand customer touchpoints, foster greater innovation and optimize operations. For more information, visit: www.netapp.com #DataDriven</p>
</div>

                </article>
                <!-- Page Container -->
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Footer -->
      
      <footer class="n-footer n-footer--v1" style="border-top: solid 10px #DFDFDF;">
        <div class="n-footer__bottom">
          <div class="n-container">
            <div class="n-footer__bottom-left">
              <div class="n-footer__copyright">
                  <a href="//www.netapp.com/us/legal/copyright.aspx" class="n-footer__copyright-link">© 1994-2018 NetApp, Inc. All rights reserved.</a>
              </div>
              <div class="n-footer__copyright">
                <a href="//www.netapp.com/us/legal/netapptmlist.aspx" class="n-footer__copyright-link">Trademarks</a>
              </div>
              <div class="n-footer__social-links">
                <ul class="n-footer__social-link-list">
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-blog" href="http://blog.netapp.com" target="_blank" title="blog" alt="blog">
                      <span class="n-footer__social-link-text">blog</span>
                      <svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
                        <title>blog@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/hybridcloudsolutions/en/common/svg/sprite.svg#blog"></use>
                      </svg>
                    </a>
                  </li>
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-community" href="http://community.netapp.com/" target="_blank" title="community" alt="community">
                      <span class="n-footer__social-link-text">community</span>
                      <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                        <title>community@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/hybridcloudsolutions/en/common/svg/sprite.svg#comments"></use>
                      </svg>
                    </a>
                  </li>

                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netappdoc" target="_blank" title="twitter" alt="twitter">
                      <span class="n-footer__social-link-text">twitter</span>
                      <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                        <title>twitter@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/hybridcloudsolutions/en/common/svg/sprite.svg#twitter"></use>
                      </svg>
                    </a>
                  </li>
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTechCommTV/" target="_blank" title="youtube" alt="youtube">
                      <span class="n-footer__social-link-text">youtube</span>
                      <svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
                        <title>youtube@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/hybridcloudsolutions/en/common/svg/sprite.svg#youtube"></use>
                      </svg>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="n-footer__bottom-right">
                <p class="n-footer__fine-print">
                    Have feedback for our website?
                    <a target="_self" href="javascript:netapp_mailto()">Let us know</a>
                </p>
            </div>
          </div>
        </div>
      </footer>

    </div>

    <script src="/hybridcloudsolutions/en/common/js/components.js"></script>
    <script src="/hybridcloudsolutions/en/common/js/doc-components.js"></script>

    <!-- i18n script -->
    <script type="text/javascript" src="/hybridcloudsolutions/en/js/responsive.js"></script>

    <!-- Elasticsearch JS -->
    <script type="text/javascript" src='/hybridcloudsolutions/en/js/bundle.js'></script>
  </body>

  
</html>
